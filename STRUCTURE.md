# CNS Repository Structure

## Directory Layout

```
cns/
├── README.md                   # Main project documentation
├── QUICKSTART.md              # Quick start guide
├── STRUCTURE.md               # This file - explains repository layout
├── PROJECT-STATUS.md          # Project status and achievements
├── cns-run                    # Wrapper script to run CNS files
├── .env.template              # Environment variable template
├── sales-report.txt           # Generated by examples (gitignored)
│
├── src/                       # Core Implementation
│   ├── cns.lisp              # Main CNS interpreter (2420 lines w/ HTTP)
│   ├── cns-run               # Actual runner script
│   ├── cns-validate          # Validation tool
│   ├── cns-validator.lisp    # Validation implementation
│   └── cns-expand            # CNSC → CNS expander
│
├── examples/                  # Example CNS Programs (30+ programs)
│   ├── README.md             # Example documentation
│   ├── hello.cns             # Basic examples (6 marked with # STARTER)
│   ├── factorial.cns
│   ├── fibonacci.cns
│   ├── killer-app-demo.cns   # Flagship HTTP API demo
│   ├── demo-webserver.cns    # HTTP server
│   ├── test-http-get.cns     # HTTP client
│   ├── python-comparison.md  # Marketing comparison
│   └── ... (30+ total examples)
│
├── dataset/                   # Training Datasets for LLMs
│   ├── README.md             # Dataset documentation
│   ├── cns-examples.json     # General examples
│   ├── webserver-examples.json        # Webserver examples
│   └── webserver-examples-extended.json  # Extended webserver examples
│
├── prompts/                   # LLM Generation Prompts
│   ├── cns-generation-template.md     # Main generation template
│   ├── cnsc-template.md              # CNSC compact format template
│   ├── quick-syntax-reference.md      # Quick reference guide
│   ├── quick-template.md             # Quick generation template
│   ├── webserver-generation-prompt.md # Specialized webserver template
│   └── webserver-template.md         # Webserver template
│
├── tests/                     # All Testing Files
│   ├── llm-tests/            # LLM-Generated Test Cases
│   │   ├── 01-factorial.cns  # Numbered test cases (10 total)
│   │   ├── 02-prime.cns
│   │   ├── ...
│   │   ├── generated/        # 8 validated programs (gitignored)
│   │   ├── results/          # Test results (gitignored)
│   │   ├── run-tests.sh      # Structure validation script
│   │   ├── run-execution-tests.sh  # Execution testing script
│   │   ├── TEST-RESULTS.md   # Test analysis & results
│   │   └── test-input.txt    # Test data file
│   │
│   ├── grok-iterations/      # Grok Iteration Testing
│   │   ├── iteration-1/      # First iteration (failed)
│   │   │   ├── grok-prime-test.cns
│   │   │   ├── grok-prime-corrected.cns
│   │   │   └── grok-prime-test-composite.cns
│   │   ├── iteration-2/      # Second iteration (success)
│   │   │   └── grok-sum-range.cns
│   │   ├── GROK-FEEDBACK.md  # Issue analysis from iteration 1
│   │   ├── ITERATION-SUMMARY.md  # Comparison of both iterations
│   │   └── GROK-ITERATION-2-SUCCESS.md  # Success report
│   │
│   ├── regression-tests.lisp  # Unit tests
│   ├── run-all-tests.sh      # Run all tests
│   ├── run-validation-tests.sh  # Validation tests
│   ├── test-input.txt        # Test data file
│   ├── test-wordcount-input.txt  # Word count test data
│   └── validation-test-bad.cns   # Bad validation test
│
├── scripts/                   # Build & Generation Scripts
│   ├── README.md             # Scripts documentation
│   ├── build-starter.sh      # Build starter package (34KB tarball)
│   ├── reorganize.sh         # Repository reorganization
│   ├── llm-tester.py         # LLM testing tool
│   ├── generate-dataset.lisp           # Generate training JSON
│   ├── generate-extended-webservers.lisp
│   ├── generate-more-webservers.lisp
│   └── simple-webserver-gen.lisp
│
├── build/                     # Build Artifacts (gitignored)
│   ├── cns-starter/          # Extracted starter package
│   └── cns-starter.tar.gz    # 34KB distribution tarball
│
└── docs/                      # Documentation
    ├── guides/                # User Guides
    │   ├── AGENTS.md          # Guide for AI agents developing CNS
    │   ├── CNSC-COMPACT.md    # CNSC compact format guide
    │   ├── FUNCTIONS.md       # Functions guide
    │   ├── LLM-INTEGRATION.md # How to integrate CNS with LLMs
    │   └── LLM-TRAINING-READY.md  # Training preparation guide
    │
    └── development/           # Development Documentation
        ├── CNSC-VALIDATION-RESULTS.md  # CNSC validation analysis
        ├── DEVELOPMENT-CHECKLIST.md    # Development checklist
        ├── HTTP-CLIENT-SUMMARY.md      # HTTP client implementation
        ├── PHASE-2-SUMMARY.md          # Phase 2 results
        ├── REAL-SOCKETS.md             # Socket implementation
        ├── STARTER-PACKAGE.md          # Starter package system
        ├── TESTING.md                  # Testing procedures
        └── UPDATES.md                  # Change log / update history
```

## Quick Navigation

### I want to...

**Run a CNS program:**
```bash
./cns-run examples/factorial.cns
```

**See available examples:**
```bash
./cns-run --list
```

**Run all tests:**
```bash
cd tests/llm-tests
./run-tests.sh
```

**Generate training data:**
```bash
sbcl --script scripts/generate-dataset.lisp
```

**Learn about CNS:**
- Start: `README.md`
- Quick start: `QUICKSTART.md`
- For AI agents: `docs/guides/AGENTS.md`

**Integrate with an LLM:**
- Read: `docs/guides/LLM-INTEGRATION.md`
- Use template: `prompts/cns-generation-template.md`
- Quick ref: `prompts/quick-syntax-reference.md`

**Contribute:**
- Read: `docs/development/UPDATES.md`
- Check: `tests/llm-tests/TEST-RESULTS.md`

## File Counts

- **Examples:** 30+ CNS programs (6 marked as STARTER)
- **Dataset:** Training examples (JSON)
- **Tests:** 10 LLM-generated + 8 validated + 4 Grok iteration tests
- **Prompts:** 6 generation templates
- **Documentation:** 13 guides + 8 development docs
- **Scripts:** 8 utilities (build, generation, testing)

## Key Files

| File | Purpose |
|------|---------|
| `src/cns.lisp` | Main CNS interpreter (2420 lines w/ HTTP client) |
| `cns-run` | Command-line runner |
| `examples/killer-app-demo.cns` | Flagship HTTP API demo (37% smaller than Python) |
| `scripts/build-starter.sh` | Builds 34KB starter package |
| `prompts/cnsc-template.md` | CNSC compact format template |
| `docs/development/HTTP-CLIENT-SUMMARY.md` | HTTP implementation details |
| `docs/development/STARTER-PACKAGE.md` | Starter package architecture |
| `QUICKSTART.md` | 5-minute getting started guide |
| `PROJECT-STATUS.md` | Complete project status & metrics |

## Recent Changes

**2025-10-31**: Phase 3 Complete
- Added HTTP client (GET/POST) with zero dependencies
- Created killer-app-demo.cns (37% smaller than Python)
- Built automated starter package system (34KB distribution)
- Added comprehensive documentation for HTTP and starter package

**2025-10-28**: Repository Reorganization
1. Clean up root directory (was 15+ markdown files)
2. Logically group related files
3. Separate source, tests, docs, and scripts
4. Make navigation easier for new contributors
5. Support scalable project growth

## Maintenance

When adding new files, follow these guidelines:

- **New examples:** → `examples/` (mark beginner-friendly with `# STARTER`)
- **Test cases:** → `tests/llm-tests/` (numbered: 11-xxx.cns)
- **Prompts:** → `prompts/`
- **Documentation:** → `docs/guides/` or `docs/development/`
- **Scripts:** → `scripts/`
- **Core code:** → `src/`

Keep root directory minimal: only README, QUICKSTART, PROJECT-STATUS, and essential files.

**Starter Package**: 6 examples marked with `# STARTER` are auto-extracted by `scripts/build-starter.sh` for beginner distribution (34KB tarball).
